<header>
    <nav class="navbar">
        <div class="container-fluid">
            <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbar"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="32"
                    height="32"
                    fill="#F5C518"
                    class="bi bi-list"
                    viewBox="0 0 16 16"
                >
                    <path
                        fill-rule="evenodd"
                        d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"
                    />
                </svg>
            </button>
            <div
                class="offcanvas offcanvas-start"
                tabindex="-1"
                id="offcanvasNavbar"
            >
                <div class="offcanvas-header">
                    <a class="navbar-brand" id="title-brand" href="/homepage" aria-expanded="false">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            fill="#F5C518"
                            class="bi bi-film"
                            id="logo-brand"
                            viewBox="0 0 16 16"
                        >
                            <path
                                d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"
                            />
                        </svg>

                        <span id="brand-name">Cinesthethic</span>
                    </a>
                    <button
                        type="button"
                        id="cls-btn"
                        data-bs-dismiss="offcanvas"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="32"
                            height="32"
                            fill="#F5C518"
                            class="bi bi-x"
                            viewBox="0 0 16 16"
                        >
                            <path
                                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"
                            />
                        </svg>
                    </button>
                </div>
                <div class="offcanvas-body">
                    <form class="d-flex" id="search-bar-offcanvas" role="search" action="/search" method="GET">
                        <input
                            class="form-control search-bar"
                            type="search"
                            placeholder="Cerca un film per titolo, genere o regista"
                            name="q"
                        />
                        <button class="btn" type="submit">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                class="ipc-icon ipc-icon--magnify"
                                id="iconContext-magnify"
                                viewBox="0 0 24 24"
                                fill="currentColor"
                                role="presentation"
                            >
                                <path fill="none" d="M0 0h24v24H0V0z"></path>
                                <path
                                    d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                                ></path>
                            </svg>
                        </button>
                    </form>
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <nav class="nav flex-column nav-offcanvas">
                            <a class="nav-link" href="#">Film</a>
                            <a class="nav-link" href="#">Registi</a>
                            <a class="nav-link" href="#">Generi</a>
                        </nav>
                        <hr id="divider" />
                        <nav class="nav flex-column nav-offcanvas">
                            <a
                                id="user-name-offcanvas"
                                class="nav-link"
                                href="#"
                                >Profilo</a>
                            <a
                                id="user-name-offcanvas"
                                class="nav-link"
                                href="#"
                                >Esci</a>
                        </nav>
                    </ul>
                </div>
            </div>
            <div id="logo-navbar">
                <a class="navbar-brand" id="title-brand" href="/homepage" aria-expanded="false">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="#F5C518"
                        class="bi bi-film"
                        id="logo-brand"
                        viewBox="0 0 16 16"
                        alt="Logo"
                    >
                        <path
                            d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"
                        />
                    </svg>
                    <span id="brand-name">Cinesthetic</span>

                </a>
                <nav class="nav" id="nav-links">
                    <div class="dropdown">
                        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Film
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end dropdown-user">
                            <li><a class="dropdown-item" href="/filter?filter=best">Migliori recensioni</a></li>
                            <li><a class="dropdown-item" href="/filter?filter=top">Pi√π votati</a></li>
                        </ul>
                    </div>
                    <!-- <a class="nav-link" href="#">Registi</a> -->
                    <div class="dropdown">
                        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Generi
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end dropdown-user">
                            <% allGenres.forEach(genre => { %>
                                <li>
                                    <a class="dropdown-item" href="/search?q=<%= genre.genre_name %>">
                                        <%= genre.genre_name %>
                                    </a>
                                </li>
                            <% }) %>
                        </ul>
                    </div>
                </nav>
            </div>
            <form method="GET" action="/search" class="d-flex" id="search-bar-btn">
                <input
                    class="form-control search-bar"
                    type="search"
                    placeholder="Cerca un film per titolo, genere, regista o sceneggiatore"
                    name="q"
                />
                <button class="btn search-btn" type="submit">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        class="ipc-icon ipc-icon--magnify"
                        id="iconContext-magnify"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        role="presentation"
                    >
                        <path fill="none" d="M0 0h24v24H0V0z"></path>
                        <path
                            d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                        ></path>
                    </svg>
                </button>
            </form>
            <% if(isLogged) { %>
            <div class="navbar-brand dropdown" href="#">
                <a
                    id="user-name"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                >
                    <%= user.username %>
                </a>
                <ul class="dropdown-menu dropdown-menu-end dropdown-user">
                    <li>
                        <a class="dropdown-item" href="#">Il tuo profilo</a>
                    </li>
                    <li><hr class="dropdown-divider"/></li>
                    <% if(user && user.type === 0) { %>
                        <li><a class="dropdown-item" href="/admin-panel">Inserisci un film</a></li>
                        <li><hr class="dropdown-divider"/></li>
                    <% } %>
                    <li>
                        <form method="POST" action="/accedi/logout">
                            <button class="dropdown-item" type="submit" id="logout-btn">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    fill="currentColor"
                                    class="bi bi-box-arrow-left"
                                    viewBox="0 0 16 16"
                                >
                                    <path
                                        fill-rule="evenodd"
                                        d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"
                                    />
                                    <path
                                        fill-rule="evenodd"
                                        d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"
                                    />
                                </svg>
                                Logout
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
            <% } else { %>
            <ul class="navbar-brand navbar-access mb-lg-0">
                <li><a type="button" class="btn" id="login-btn" href="/accedi" aria-expanded="false">Accedi</a></li>
            </ul>
            <% } %>
        </div>
    </nav>
</header>
